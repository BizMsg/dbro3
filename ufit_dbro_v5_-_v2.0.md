# UFIT\_DBRO\_v5\_사용자메뉴얼\_v2.0

DBRO v5

사용자매뉴얼

Ver.2.0

개 정 이 력

| 버전  | 작성일         | 변경내용                               | 작성자 |
| --- | ----------- | ---------------------------------- | --- |
| 1.0 | 2017.04.27  | 신규 작성                              | 정종하 |
| 1.1 | 2017.05.14  | 결과코드 추가                            | 정종하 |
| 1.2 | 2020.03.04  | AT/FT 신규 기능 및 Kakao 결과코드 추가        | 이준  |
| 1.3 | 2020.03.30  | 친구톡 와이드이미지 기능 추가                   | 이준  |
| 1.4 | 2020.05.15  | 브랜드톡 발송 기능 추가                      | 이준  |
| 1.5 | 2020.07.01  | 알림톡 강조표기 기능 추가                     | 이준  |
| 1.6 | 2020. 07.17 | 버튼 타입 정보 추가                        | 이준  |
| 1.7 | 2020.07.22  | SSL 포트 안내 및 JDK 최소 버전 수정           | 김성조 |
| 1.8 | 2020.09.11  | 카카오비즈메시지 버튼타입 정보수정(채널추가: CA -> AC) | 이준  |
| 1.9 | 2020.12.16  | 알림톡 바로연결 기능 추가                     | 이준  |
| 2.0 | 2021.06.04  | RCS 발송 기능 추가                       | 김성조 |

목 차

I. 개요 5

1\. UFIT DBRO란? 5

II. 발송 선결 조건 5

1\. 발송 서비스 계정 생성 및 서비스 사용 승인요청 5

2\. 카카오 비즈 메시지를 사용하려면? 5

III. 고객시스템과 연동 5

1\. 연동방식은? 5

2\. 데이터베이스 테이블 구조 5

IV. 설치 8

1\. 설치 가능 환경 8

2\. 설치 전 확인사항 8

3\. 설치 및 구동 방법 8

1\) 공통 8

2\) Linux 계열 8

3\) Windows 계열 8

4\. 디렉터리(폴더) 구성 9

5\. 환경설정파일 9

V. 발송 10

1\. 메시지타입 (TRAN\_TYPE) 10

2\. 발송상태변화 (TRAN\_STATUS) 10

3\. 발송결과확인 (TRAN\_RSLT) 10

4\. 대체발송타입 (RE\_TYPE) 10

5\. 발송쿼리 (MYSQL기준) 11

1\) SMS 발송 11

2\) MMS 발송 11

3\) AT(알림톡) 발송 11

4\) FT(친구톡) 발송 12

5\) AT/FT(알림톡/친구톡) Attachment 발송 12

6\) BI(브랜드톡) 발송 14

7\) AT(알림톡) + 강조표기 14

8\) AT(알림톡) + 바로연결 15

9\) FT(친구톡 이미지 및 친구톡 와이드 이미지) 발송 17

10\) AT/FT/BI(알림톡/친구톡/브랜드톡) + 대체(SMS/MMS)발송 18

11\) RCS 발송 19

12\) RCS + BUTTONS 발송 20

13\) RCS + 대체(SMS/MMS)발송 22

14\) AT/FT + 1차 대체(RCS) + 2차 대체(SMS/MMS) 발송 22

15\) RCS + 1차 대체(AT/FT) + 2차 대체(SMS/MMS) 발송 23

VI. 발송결과코드 24

### 개요 <a href="#ole_link9" id="ole_link9"></a>

### UFIT DBRO란? <a href="#_toc73440712" id="_toc73440712"></a>

고객사 시스템 환경에 설치되어 이동 통신사 기반의 메시지 (SMS/LMS/MMS/RCS) 와

카카오 비즈 메시지 (알림톡/친구톡) 를 발송하기 위해 발송서비스와 연동해주도록

연계해주는 모듈입니다.

### 발송 선결 조건 <a href="#_toc73440713" id="_toc73440713"></a>

### 발송 서비스 계정 생성 및 서비스 사용 승인요청 <a href="#_toc73440714" id="_toc73440714"></a>

### 카카오 비즈 메시지를 사용하려면? <a href="#_toc73440715" id="_toc73440715"></a>

→ Yellow ID 및 알림톡 메시지 내용 (템플릿) 승인요청

### 고객시스템과 연동 <a href="#_toc73440716" id="_toc73440716"></a>

### 연동방식은? <a href="#ole_link11" id="ole_link11"></a>

DBRO는 고객사의 데이터베이스와 연동을 통하여 메시지를 발송하는 모듈로써,

고객사의 데이터베이스에 SMS/MMS/RCS/알림톡/친구톡 발송을 위한 테이블을 생성한 후 발송에 필요한 데이터가 입력되면 이를 확인하여 발송 서버로 메시지를 전송하는 방식입니다

### 데이터베이스 테이블 구조 <a href="#_toc73440718" id="_toc73440718"></a>

DBRO에서 사용하는 테이블의 목록은 다음과 같습니다.

| <p>메시지 테이블 <strong>– EM_TRAN</strong></p><p>: 메시지 발송을 위한 데이터가 입력되며, 발송결과업데이트가 이루어지기까지 데이터가 존재하는 테이블</p> |
| ------------------------------------------------------------------------------------------------------- |
| <p>로그 테이블 <strong>– EM_LOG_YYYYMM</strong></p><p>: 메시지 테이블에서 발송결과업데이트가 완료된 데이터가 이동되는 테이블</p>            |
| <p>MMS 콘텐츠 테이블 <strong>– EM_TRAN_MMS</strong></p><p>: MMS 전송 시, 필요한 정보들이 입력되는 테이블</p>                   |
| <p>KKO 콘텐츠 테이블 <strong>– EM_TRAN_KKO</strong></p><p>: AT/FT전송 시, 필요한 정보들이 입력되는 테이블</p>                  |
| <p>RCS 콘텐츠 테이블 <strong>– EM_TRAN_RCS</strong></p><p>: RCS전송 시, 필요한 정보들이 입력되는 테이블</p>                    |

즉, 테이블 생성 권한만 있다면, 자동으로 해당 테이블들을 생성합니다.

(EM\_TRAN)

| **컬럼명**          | <p><strong>데이터</strong></p><p><strong>타입</strong></p> | **길이** | <p><strong>입력</strong></p><p><strong>필수</strong></p> | **PK** | <p><strong>NOT</strong><br><strong>NULL</strong></p> | **비고**                                                                                                                                            |
| ---------------- | ----------------------------------------------------- | ------ | ---------------------------------------------------- | ------ | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| TRAN\_PR         | INTEGER                                               | -      | O                                                    | O      | O                                                    | 메시지 키 (AUTO INCREMENT)                                                                                                                            |
| TRAN\_REFKEY     | VARCHAR                                               | 40     | -                                                    | -      | -                                                    | 참조용                                                                                                                                               |
| TRAN\_ID         | VARCHAR                                               | 20     | -                                                    | -      | -                                                    | 참조용                                                                                                                                               |
| TRAN\_PHONE      | VARCHAR                                               | 15     | O                                                    | -      | O                                                    | 수신자 전화번호                                                                                                                                          |
| TRAN\_CALLBACK   | VARCHAR                                               | 15     | -                                                    | -      | -                                                    | 송신자 전화번호                                                                                                                                          |
| TRAN\_STATUS     | CHAR                                                  | 1      | O                                                    | -      | -                                                    | <p>메시지 상태</p><p><strong>(1:접수, 0:발송진행중, 2:발송 후 대기, 3:리포트수신완료)</strong></p>                                                                        |
| TRAN\_DATE       | DATETIME                                              | -      | O                                                    | -      | O                                                    | 메시지 접수시간 (전송 요청 시간)                                                                                                                               |
| TRAN\_RSLTDATE   | DATETIME                                              | -      | -                                                    | -      | -                                                    | 실제 단말기에 전달된 시간 (통신사에서 전달한 시간)                                                                                                                     |
| TRAN\_REPORTDATE | DATETIME                                              | -      | -                                                    | -      | -                                                    | 전송 결과 수신 시간                                                                                                                                       |
| TRAN\_RSLT       | CHAR                                                  | 1      | -                                                    | -      | -                                                    | 전송 결과 코드                                                                                                                                          |
| TRAN\_NET        | VARCHAR                                               | 3      | -　                                                   | -      | -                                                    | 통신사 정보 (SKT/KTF/LGT/KKO)                                                                                                                          |
| TRAN\_MSG        | VARCHAR                                               | 255    | O                                                    | -      | -                                                    | 전송 메시지                                                                                                                                            |
| TRAN\_ETC1       | VARCHAR                                               | 64     | -                                                    | -      | -                                                    | 사용자가 임의로 사용할 수 있는 필드                                                                                                                              |
| TRAN\_ETC2       | VARCHAR                                               | 16     | -                                                    | -      | -                                                    | 사용자가 임의로 사용할 수 있는 필드                                                                                                                              |
| TRAN\_ETC3       | VARCHAR                                               | 16     | -                                                    | -      | -                                                    | 사용자가 임의로 사용할 수 있는 필드                                                                                                                              |
| TRAN\_ETC4       | INTEGER                                               | -      | -                                                    | -      | -                                                    | (MMS/AT/FT/RCS) 콘텐츠 테이블 매칭키 정보                                                                                                                    |
| TRAN\_TYPE       | INTEGER                                               | -      | O                                                    | -      | -                                                    | <p>메시지 타입 <strong>(4:SMS, 6:MMS, 7:AT, 8:FT, 11:RCS)</strong></p><p>대체발송이 이루진 경우<br><strong>(1:SMS / 2:MMS / 23:AT / 24:FT / 27:RCS)</strong></p> |

(EM\_TRAN\_MMS)

| **컬럼명**         | <p><strong>데이터</strong><br><strong>타입</strong></p> | **길이** | <p><strong>입력</strong></p><p><strong>필수</strong></p> | **PK** | <p><strong>NOT</strong><br><strong>NULL</strong></p> | **비고**                   |
| --------------- | -------------------------------------------------- | ------ | ---------------------------------------------------- | ------ | ---------------------------------------------------- | ------------------------ |
| MMS\_SEQ        | INTEGER                                            | -      | O                                                    | O      | O                                                    | 메시지 키 (AUTO INCREMENT)   |
| FILE\_CNT       | INTEGER                                            | -      | O                                                    | -      | O                                                    | MMS 전송 시 첨부파일 개수 (1개 이상) |
| BUILD\_YN       | CHAR                                               | 1      | -                                                    | -      | -                                                    | -                        |
| MMS\_BODY       | VARCHAR                                            | 2000   | -                                                    | -      | -                                                    | 본문 내용                    |
| MMS\_SUBJECT    | VARCHAR                                            | 40     | O                                                    | -      | -　                                                   | 메시지제목                    |
| FILE\_TYPE1     | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일타입 생략 가능           |
| FILE\_TYPE2     | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일타입 생략 가능           |
| FILE\_TYPE3     | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일타입 생략 가능           |
| FILE\_TYPE4     | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일타입 생략 가능           |
| FILE\_TYPE5     | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일타입 생략 가능           |
| FILE\_NAME1     | VARCHAR                                            | 100    | -                                                    | -      | -                                                    | MMS 파일경로를 포함한 파일명 생략가능   |
| FILE\_NAME2     | VARCHAR                                            | 100    | -                                                    | -      | -                                                    | MMS 파일경로를 포함한 파일명 생략가능   |
| FILE\_NAME3     | VARCHAR                                            | 100    | -                                                    | -      | -                                                    | MMS 파일경로를 포함한 파일명 생략가능   |
| FILE\_NAME4     | VARCHAR                                            | 100    | -                                                    | -      | -                                                    | MMS 파일경로를 포함한 파일명 생략가능   |
| FILE\_NAME5     | VARCHAR                                            | 100    | -                                                    | -      | -                                                    | MMS 파일경로를 포함한 파일명 생략가능   |
| SERVICE\_DEP1   | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일 서비스통신사 생략가능       |
| SERVICE\_DEP2   | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일 서비스통신사 생략가능       |
| SERVICE\_DEP3   | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일 서비스통신사 생략가능       |
| SERVICE\_DEP4   | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일 서비스통신사 생략가능       |
| SERVICE\_DEP5   | VARCHAR                                            | 3      | -                                                    | -      | -                                                    | MMS 파일 서비스통신사 생략가능       |
| SKN\_FILE\_NAME | VARCHAR                                            | 255    | -                                                    | -      | -                                                    | -                        |

(EM\_TRAN\_KKO)

| **컬럼명**           | <p><strong>데이터</strong><br><strong>타입</strong></p> | **길이** | **필수** | **PK** | <p><strong>NOT</strong><br><strong>NULL</strong></p> | **비고**                            |
| ----------------- | -------------------------------------------------- | ------ | ------ | ------ | ---------------------------------------------------- | --------------------------------- |
| KKO\_SEQ          | INTEGER                                            | -      | O      | O      | O                                                    | 메시지 키 (AUTO INCREMENT)            |
| USER\_KEY         | VARCHAR                                            | 30     | -      | -      | -                                                    | 옐로아이디 봇을 이용해 받은 옐로아이디 사용자 식별키     |
| AD\_FLAG          | VARCHAR                                            | 1      | -      | -      | -                                                    | 광고성 메시지 필수 표기 사항을 노출 (노출여부 Y/N)   |
| NATION\_CODE      | VARCHAR                                            | 5      | O      | -      | -                                                    | 국가코드                              |
| SENDER\_KEY       | VARCHAR                                            | 40     | O      | -      | -                                                    | 발신프로필 키                           |
| TEMPLATE\_CODE    | VARCHAR                                            | 30     | O      | -      | -                                                    | 템플릿코드                             |
| RESPONSE\_METHOD  | VARCHAR                                            | 8      | -      | -      | -                                                    | 전송결과를 응답 받는 방법 (기본: push)         |
| TIMEOUT           | INTEGER                                            | -      | -      | -      | -                                                    | 메시지전송요청 시 성공여부를 결정하기 위한 시간(초)     |
| MESSAGE           | VARCHAR                                            | 2000   | O      | -      | -                                                    | 메시지본문                             |
| RE\_TYPE          | VARCHAR                                            | 3      | -      | -      | -                                                    | 대체발송유형 (SMS/MMS)                  |
| RE\_BODY          | VARCHAR                                            | 2000   | -      | -      | -                                                    | 대체발송메시지내용                         |
| RE\_PART          | VARCHAR                                            | 1      | -      | -      | -                                                    | 대체발송처리주체 (C:클라이언트/S:게이트웨이/N:하지않음) |
| RE\_SUBJECT       | VARCHAR                                            | 40     | -      | -      | -                                                    | MMS 대체발송인 경우, 메시지제목               |
| ORI\_MSGTYPE      | VARCHAR                                            | 3      | -      | -      | -                                                    | 원본 메시지 타입 (AT:알림톡/FT:친구톡)         |
| ORI\_MSGKEY       | INTEGER                                            | -      | -      | -      | -                                                    | 원본 메시지 키                          |
| ATTACHED\_FILE\_1 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                       |
| ATTACHED\_FILE\_2 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                       |
| ATTACHED\_FILE\_3 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                       |
| ATTACHED\_FILE\_4 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                       |
| ATTACHED\_FILE\_5 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                       |

(EM\_TRAN\_RCS)

| **컬럼명**           | <p><strong>데이터</strong><br><strong>타입</strong></p> | **길이** | **필수** | **PK** | <p><strong>NOT</strong><br><strong>NULL</strong></p> | **비고**                                                         |
| ----------------- | -------------------------------------------------- | ------ | ------ | ------ | ---------------------------------------------------- | -------------------------------------------------------------- |
| RCS\_SEQ          | INTEGER                                            | -      | O      | O      | O                                                    | 메시지 키 (AUTO INCREMENT)                                         |
| COPY\_ALLOWED     | VARCHAR                                            | 1      | -      | -      | -                                                    | 단말기에서 사용자에게 ‘복사’/’공유’ 메뉴 보기 여부 (Y / N, 기본 N)                   |
| CHATBOT\_ID       | VARCHAR                                            | 40     | O      | -      | -                                                    | RCS비즈센터를 통해 생성한 챗봇ID                                           |
| FOOTER            | VARCHAR                                            | 64     | -      | -      | -                                                    | 메시지 하단에 수신 거부 문구를 입력                                           |
| HEADER            | VARCHAR                                            | 1      | O      | -      | -                                                    | 메시지 상단에 식별 문구를 입력 (0:Web 발신,1:광고)                              |
| MESSAGEBASE\_ID   | VARCHAR                                            | 40     | O      | -      | -                                                    | RCS 공통포맷 또는 템플릿 ID (RCS SMS, LMS, MMS 공통포맷, 템플릿은 별도등록)         |
| BUTTONS           | VARCHAR                                            | 2000   | -      | -      | -                                                    | 메시지에 삽입할 버튼 정보 (Json 형식)                                       |
| RCS\_BODY         | INTEGER                                            | 2000   | O      | -      | -                                                    | 메시지 베이스에서 치환할 파라미터 정보 (Json 형식)                                |
| AGENCY\_ID        | VARCHAR                                            | 20     |        |        |                                                      | <p>대행사 ID</p><p>(ChatbotId에 대한 발송 권한 체크, default:daoutech)</p> |
| RE\_TYPE          | VARCHAR                                            | 3      | -      | -      | -                                                    | 대체발송유형 (SMS/MMS)                                               |
| RE\_BODY          | VARCHAR                                            | 2000   | -      | -      | -                                                    | 대체발송메시지내용                                                      |
| RE\_PART          | VARCHAR                                            | 1      | -      | -      | -                                                    | 대체발송처리주체 (C:클라이언트/S:게이트웨이/N:하지않음)                              |
| RE\_SUBJECT       | VARCHAR                                            | 40     | -      | -      | -                                                    | MMS 대체발송인 경우, 메시지제목                                            |
| ATTACHED\_FILE\_1 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                                                    |
| ATTACHED\_FILE\_2 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                                                    |
| ATTACHED\_FILE\_3 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                                                    |
| ATTACHED\_FILE\_4 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                                                    |
| ATTACHED\_FILE\_5 | VARCHAR                                            | 100    | -      | -      | -                                                    | 첨부파일명(경로포함)                                                    |

### 설치 <a href="#_toc73440719" id="_toc73440719"></a>

### 설치 가능 환경 <a href="#ole_link21" id="ole_link21"></a>

DBRO는 Java 기반으로 실행되는 프로그램으로 Java(JVM)가 설치 되고 실행 가능한

OS이면 모두 운영 가능합니다.

|                      | **Database** |        |   |   |
| -------------------- | ------------ | ------ | - | - |
| MSSQL                | MYSQL        | ORACLE |   |   |
| **Operating System** | Linux        | O      | O | O |
| Unix                 | O            | O      | O |   |
| Windows              | O            | O      | O |   |

### 설치 전 확인사항 <a href="#_toc73440721" id="_toc73440721"></a>

1. JDK 설치 여부

→ Oracle Sun Java 1.8 이상 설치 필요

1. DBMS 설치 여부

→ Mysql, Oracle, Mssql 지원 가능

1. 방화벽 오픈 상태 확인

### 설치 및 구동 방법 <a href="#_toc73440722" id="_toc73440722"></a>

#### 공통 <a href="#_toc470538710" id="_toc470538710"></a>

1. Dbro\_v5를 업로드 한 뒤 압축
2. 환경 설정 파일을 수정합니다.

**- 설정파일위치 : {모듈경로}/config/dbro.conf**

\# 계정 설정

GW\_CONNECT\_IP (사업팀 확인 후 설정 ex. ena.ufit.co.kr)

GW\_CONNECT\_PORT (SSL : 4006)

USE\_SSL (SSL: Y, NON-SSL 미지원)

\# DBMS연결 정보 설정 : DB\_TYPE, DB\_URL, DB\_USER, DB\_PASS

#### Linux 계열 <a href="#_toc73440724" id="_toc73440724"></a>

*
  1.
  2.

1. dbro5를 시작합니다.

**- 스크립트 수행 : {모듈경로}/script/dbro-start**

1. dbro5를 중지합니다.

**- 스크립트 수행 : {모듈경로}/script /dbro-stop**

#### Windows 계열 <a href="#_toc73440725" id="_toc73440725"></a>

*
  1.
  2.

1. dbro5를 설치/시작합니다. (경로: {모듈경로}/bat)

**- 설치 : sevice-install.bat 실행**

\# DAOUTECH UFIT DBRO v5 등록 확인 : 제어판 → 관리도구 → 서비스

(해당 서비스를 통하여 직접 시작/종료 가능)

**- 시작 : sevice-start.bat 실행** (서비스 상태가 ‘시작’으로 변경됨)

1. dbro5의 설치 취소가 필요한 경우 (경로: {모듈경로}/bat)

**- 설치 취소 : sevice-uninstall.bat 실행**

### 디렉터리(폴더) 구성 <a href="#_toc73440726" id="_toc73440726"></a>

| **디렉터리명**       | **설 명**                            |
| --------------- | ---------------------------------- |
| **bat**         | Windows용 실행스크립트 위치                 |
| **bat/wrapper** | Java Windows Service Wrapper 파일 위치 |
| **blk**         | 블랙리스트 파일 위치                        |
| **rep**         | 리포트 임시보관 위치                        |
| **config**      | 설정파일 위치                            |
| **config/Data** | 지원 DB별 SQL문 위치                     |
| **lib**         | 모듈에서 사용하는 라이브러리(JAR) 위치            |
| **log**         | 로그 위치                              |
| **script**      | Linux/Unix 용 실행스크립트 위치             |

\* blk, req, log의 경우, 기본 상대경로 위치를 사용할 경우, Windows의

경우 bat/wrapper, Linux/Unix의 경우 config와 같은 레벨에 존재.

### 환경설정파일 <a href="#_toc73440727" id="_toc73440727"></a>

DBRO의 설정파일(dbro.conf)은 config폴더에 존재하며, 설정에 따라 동작됩니다.

Dbro.conf에 설정정보가 입력되고, 스크립트를 통해 모듈을 구동하며 정상적으로 동작하였을

경우 설정파일 내, 패스워드 부분은 암호화되며 dbro.confx로 확장자가 변경됩니다.

Dbro.confx에서 패스워드 부분의 입력 값 변경이 필요한 경우 다음과 같이 진행합니다

1. 스크립트를 통해 모듈 중지
2. dbro.confx → dbro.conf로 변경
3. dbro.conf에서 패스워드 부분을 평문으로 재입력
4. 스크립트를 통해 모듈 시작

### 모듈 버전 업그레이드 ( 모듈 교체시 참조 )

최신 모듈을 사용하려는 기존 모듈 사용자가 환경설정을 유지하고자 할 때 참고해야 할 사항을 표기합니다.

\* 모듈(dbro5.jar) 교체는 공통

| **버전명**   | **추가 기능**    |                                                                                                                                                     |
| --------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| **5.6.3** | RCS 발송 기능 추가 | <p>1. Config/Data/*.cfg 파일 교체 필요</p><p>2. 설정파일 옵션 변경/추가 (dbro.conf)</p><p>- 접속 Port 변경 : 4005 -> 4006</p><p>- RCS 테이블 명 추가 : RCS_CONTENTS_TABLE</p> |

### 발송 <a href="#_toc73440728" id="_toc73440728"></a>

메시지 문자열은 _KSC 5601(ISO 10646-1/Unicode1.1) 한글 코드에_ 정의된 문자열입니다.

### 메시지타입 (TRAN\_TYPE) <a href="#_toc73440729" id="_toc73440729"></a>

사용자는 총 5가지(SMS/MMS/AT/FT/RCS) 메시지 타입을 TRAN\_TYPE에 입력 가능하며,

AT/FT/RCS 타입에 한하여 설정에 의하여 대체발송이 이루어진 경우, 해당 레코드가

메시지테이블에 추가로 생성되며 TRAN\_TYPE은 1/SMS, 2/MMS, 23/AT, 24/FT, 27/RCS로

구분됩니다.

| **메시지 타입** | **SMS** | **MMS** | **AT** | **FT** | **RCS** |
| ---------- | ------- | ------- | ------ | ------ | ------- |
| **본문 발송**  | 4       | 6       | 7      | 8      | 11      |
| **대체 발송**  | 1       | 2       | 23     | 24     | 27      |

### 발송상태변화 (TRAN\_STATUS) <a href="#_toc73440730" id="_toc73440730"></a>

TRAN\_STATUS는 다음과 같은 상태 변화를 가집니다.

| **상태** | **1** | **0**                   | **2**                           | **3**                   | **6**                         |
| ------ | ----- | ----------------------- | ------------------------------- | ----------------------- | ----------------------------- |
| **설명** | 발송 요청 | <p>dbro</p><p>발송 준비</p> | <p>dbro 발송 후</p><p>결과리포트 대기</p> | <p>결과리포트</p><p>업데이트</p> | <p>Client 대체발송</p><p>처리 중</p> |

### 발송결과확인 (TRAN\_RSLT) <a href="#_toc73440731" id="_toc73440731"></a>

발송 결과는 메시지 테이블의 TRAN\_RSLT 컬럼으로 확인이 가능하며 “발송 결과 코드”의

상세 설명은 “Ⅵ. 발송결과코드” 항목을 참고하여 주시기 바랍니다.

### 대체발송타입 (RE\_TYPE) <a href="#_toc73440732" id="_toc73440732"></a>

알림톡/친구톡/RCS은 전송결과에 대해 실패가 발생할 경우, 최대 2차 **대체발송이 가능합니다**.

\- 단, 해당 서비스 아이디에 대해 **대체발송 가능여부와 주체**에 대한 설정이 되어있어야 합니다.

\- 상세 설명은 5.발송쿼리 항목을 참고하여 주시기 바랍니다.

| 메시지타입                         | 1차 대체 | 2차 대체 | <p>EM_TRAN_KKO</p><p>RE_TYPE 필드 입력값</p> | <p>EM_TRAN_RCS</p><p>RE_TYPE 필드 입력값</p> |
| ----------------------------- | ----- | ----- | --------------------------------------- | --------------------------------------- |
| <p>알림톡(AT),</p><p>친구톡(FT)</p> | SMS   |       | SMS                                     | -                                       |
| MMS                           |       | MMS   | -                                       |                                         |
| RCS                           |       | R     | -                                       |                                         |
| RCS                           | SMS   | R     | SMS                                     |                                         |
| RCS                           | MMS   | R     | MMS                                     |                                         |
| 메시지타입                         | 1차 대체 | 2차 대체 | <p>EM_TRAN_RCS</p><p>RE_TYPE 필드 입력값</p> | <p>EM_TRAN_KKO</p><p>RE_TYPE 필드 입력값</p> |
| RCS                           | SMS   |       | SMS                                     |                                         |
| MMS                           |       | MMS   |                                         |                                         |
| AT                            |       | K     |                                         |                                         |
| AT                            | SMS   | K     | SMS                                     |                                         |
| AT                            | MMS   | K     | MMS                                     |                                         |
| FT                            |       | B     |                                         |                                         |
| FT                            | SMS   | B     | SMS                                     |                                         |
| FT                            | MMS   | B     | MMS                                     |                                         |

### 발송쿼리 (MYSQL기준) <a href="#_-_-mysql" id="_-_-mysql"></a>

#### SMS 발송 <a href="#_toc481059260" id="_toc481059260"></a>

| **텍스트 90 Byte 이하의 단문 메시지**                                                                                                                                                                |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>INSERT INTO EM_TRAN</p><p>(TRAN_PHONE, TRAN_CALLBACK, TRAN_STATUS, TRAN_DATE, TRAN_MSG, TRAN_TYPE)</p><p>VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), ‘Test Message 입니다’, 4);</p> |

#### MMS 발송 <a href="#_toc73440735" id="_toc73440735"></a>

**(TXT)**

| **텍스트 2,000 Byte 이하의 장문 메시지**                                                                                                                                                                                                                                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>INSERT INTO EM_TRAN_MMS</p><p>(FILE_CNT, MMS_BODY, MMS_SUBJECT) VALUES (1, ‘본문 내용’, ‘메시지 제목’);</p><p>INSERT INTO EM_TRAN</p><p>(TRAN_PHONE, TRAN_CALLBACK, TRAN_STATUS, TRAN_DATE, TRAN_TYPE, TRAN_ETC4)</p><p>VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 6, <strong>{EM_TRAN_MMS의MMS_SEQ 값}</strong>);</p> |

**(IMG+TXT)**

| **텍스트 2,000 Byte 이하, 이미지(100KB 이하) 등 멀티미디어를 같이 보내는 메시지**                                                                                                                                                                                                                                                                                              |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>INSERT INTO EM_TRAN_MMS (FILE_CNT, MMS_BODY, MMS_SUBJECT, FILE_NAME1)</p><p>VALUES (1, ‘본문 내용’, ‘메시지 제목’, ‘D:/spool/mms.jpg’);</p><p>INSERT INTO EM_TRAN</p><p>(TRAN_PHONE, TRAN_CALLBACK, TRAN_STATUS, TRAN_DATE, TRAN_TYPE, TRAN_ETC4)</p><p>VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 6, <strong>{EM_TRAN_MMS의MMS_SEQ 값}</strong>);</p> |

#### AT(알림톡) 발송 <a href="#_toc474484782" id="_toc474484782"></a>

알림톡은 사전에 발급된 **발신 프로필 키**와 미리 등록된 **템플릿 코드**를 통하여, 알림톡 발송이

가능합니다. 실제 발송할 메시지 유형으로 등록된 **템플릿** 형식에 맞춰 메시지를 입력하여야 합니다.

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE)

VALUES ({발신 프로필 키}, {템플릿 코드}, ‘82’, ‘AT 테스트입니다’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ 값}**);

#### FT(친구톡) 발송 <a href="#_toc73440737" id="_toc73440737"></a>

친구톡은 **발신 프로필 키**를 사용하여 발송되며, 카카오톡 사용자이고 발신프로필

(옐로아이디 또는 플러스친구)과 **친구일 경우 발송 가능합니다**.

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, NATION\_CODE, MESSAGE)

VALUES ({발신 프로필 키}, ‘82’, ‘FT 테스트입니다’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 8, **{EM\_TRAN\_KKO의 KKO\_SEQ 값}**);

#### AT/FT(알림톡/친구톡) Attachment 발송 <a href="#_toc73440738" id="_toc73440738"></a>

**알림톡/친구톡은** 링크 버튼을 **첨부하여 발송할 수 있으며, 버튼 타입은 총 8가지입니다**

(버튼은 최대 5개 등록 가능하나 바로연결과 함께 사용 시 2개로 제한됩니다.)

| **NO.** | **버튼타입**  | **기 능**                                                                                                                 |
| ------- | --------- | ----------------------------------------------------------------------------------------------------------------------- |
| 1       | **배송조회**  | <p>- 메시지 내용에서 택배사명과 송장번호를 파싱하여 카카오검색 배송조회</p><p>페이지로 이동하는 배송 조회하기 버튼을 자동으로 생성함</p>                                      |
| 2       | **웹링크**   | <p>- 버튼 클릭 시 인앱 브라우저에서 웹 페이지 실행</p><p>- Mobile / PC에서 실행할 URL을 각각 설정 가능</p><p>*현재 알림톡은PC에서 메시지 내용이 보이지 않음</p>           |
| 3       | **앱링크**   | <p>- 버튼 클릭 시 앱 커스텀스킴 실행</p><p>- Android /iOS에서 실행할 커스텀스킴 각각 설정 필수</p>                                                   |
| 4       | **봇키워드**  | <p>- 버튼 클릭 시 유저로부터 ’버튼명’이 텍스트로 들어간 챗버블이 발송됨</p><p>- 봇 또는 상담원에게 유저의 액션을 전달할 때 사용할 수 있음</p>                               |
| 5       | **메시지전달** | <p>- 버튼 클릭 시 유저로부터 ‘버튼명+메시지 본문’이 텍스트로 들어간</p><p>챗버블이 발송됨</p><p>- 봇 또는 상담원에게 유저가 수신한 알림톡과 함께 유저의 액션을</p><p>전달할 경우 사용</p> |
| 6       | **채널추가**  | <p>알림톡본문에 “채널추가” 버튼을 함께 전송할 경우 사용</p><p>※<em>단독 또는 최상단에만 삽입 가능</em></p>                                                 |
| 7       | **상담톡전환** | <p>버튼 클릭 시 상담톡 전환</p><p>(상담톡을 이용하는 카카오톡 채널만 이용가능)</p>                                                                   |
| 8       | **봇 전환**  | <p>버튼 클릭 시 봇 전환</p><p>(카카오 i오픈빌더를 이용하는 카카오톡 채널만 이용가능)</p>                                                               |

**(버튼파라미터)**

| **키**           | **타입**  | **필수** | **설명**                                                                 |       |
| --------------- | ------- | ------ | ---------------------------------------------------------------------- | ----- |
| button          |         | array  | -                                                                      | 버튼 목록 |
| name            | text    | Y      | 버튼 제목                                                                  |       |
| type            | text(2) | Y      | 버튼 타입 (아래 표 참조)                                                        |       |
| url\_pc         | text    | -      | pc 환경에서 버튼 클릭 시 이동할                                                    |       |
| url\_mobile     | text    | -      | Mobile 환경에서 버튼 클릭 시 이동할 URL                                            |       |
| scheme\_ios     | text    | -      | <p>Mobile iOS 환경에서 버튼 클릭 시</p><p>실행할 Application Custom Scheme</p>     |       |
| scheme\_android | text    | -      | <p>Mobile Android 환경에서 버튼 클릭 시</p><p>실행할 Application Custom Scheme</p> |       |

**(버튼타입)**

| **버튼타입**        | **속성**                             | **타입**      | **필수**                                                    | **설명**            |                                                                                                                                        |
| --------------- | ---------------------------------- | ----------- | --------------------------------------------------------- | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| **웹링크**         | **WL**                             | url\_mobile | text                                                      | Y                 | 버튼 클릭 시 이동할 pc/mobile환경별 Web URL                                                                                                       |
| url\_pc         | text                               | N           |                                                           |                   |                                                                                                                                        |
| **앱링크**         | **AL**                             | scheme\_ios | text                                                      | Y                 | <p><strong>scheme_ios, scheme_android, url_mobile 중 2가지 필수 입력</strong></p><p>mobile ios 환경에서 버튼 클릭 시 실행할 application custom scheme</p> |
| scheme\_android | text                               | Y           | mobile android 환경에서 버튼 클릭 시 실행할 application custom scheme |                   |                                                                                                                                        |
| url\_mobile     | text                               | -           | mobile 환경에서 버튼 클릭 시 이동할 url                               |                   |                                                                                                                                        |
| url\_pc         | text                               | N           | pc 환경에서 버튼 클릭 시 이동할 url                                   |                   |                                                                                                                                        |
| **배송조회**        | **DS**                             | -           | -                                                         | -                 | 버튼 클릭 시 배송조회 페이지로 이동                                                                                                                   |
| **봇키워드**        | **BK**                             | -           | -                                                         | -                 | 해당 버튼 텍스트 전송                                                                                                                           |
| **메시지전달**       | **MD**                             | -           | -                                                         | -                 | 버튼 클릭 시 배송조회 페이지로 이동                                                                                                                   |
| **채널추가**        | **AC**                             | -           | -                                                         | -                 | <p>버튼 클릭 시 카카오톡 채널 추가</p><p>※ 버튼은 단독 또는 첫번째 요소이어야 함</p>                                                                                |
| **상담톡전환**       | 상담톡을 이용하는 카카오톡 채널만 이용가능            |             |                                                           |                   |                                                                                                                                        |
| **BC**          | chat\_extra                        | text        | N                                                         | 상담톡 전환 시 전달할 메타정보 |                                                                                                                                        |
| **봇 전환**        | 카카오 I 오픈빌더의 챗봇을 사용하는 카카오톡 채널만 이용가능 |             |                                                           |                   |                                                                                                                                        |
| **BT**          | chat\_extra                        | text        | N                                                         | 봇 전환 시 전달할 메타정보   |                                                                                                                                        |
| chat\_event     | text                               | N           | 봇 전환 시 연결할 봇 이벤트명                                         |                   |                                                                                                                                        |

알림톡/친구톡 버튼타입 첨부파일의 실제 내용은 다음과 같이 JSON 형태로 구성됩니다.

| **add\_info.json**                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <p>{</p><p>"button":[</p><p>{</p><p>"name":"채널 추가",</p><p>"type":"AC"</p><p>},</p><p>{</p><p>"name":"미리 주문하기",</p><p>"type":"WL",</p><p>"url_mobile":"http://www.kakao.com"</p><p>},</p><p>{</p><p>"name":"상담원 연결하기",</p><p>"type":"MD"</p><p>},</p><p>{</p><p>"name":"방송 알림 설정 보기",</p><p>"type":"AL",</p><p>"scheme_android":"daumapps://open",</p><p>"scheme_ios":"daumapps://open"</p><p>}</p><p>]</p><p>}</p> |

**(AT+Attachment)**

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, ATTACHED\_FILE\_1)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT 테스트입니다', **‘D:/spool/add\_info.json’**);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', NOW(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ값}**);

#### BI(브랜드톡) 발송 <a href="#_toc73440739" id="_toc73440739"></a>

브랜드톡은 사전에 발급된 **발신 프로필 키**와 미리 등록된 **템플릿 코드**를 통하여 발송됩니다.

cf) 발신프로필(옐로아이디 또는 플러스친구)과 **친구여부에 따라 표시내용이 다릅니다.**

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE)

VALUES ({발신 프로필 키}, {템플릿 코드}, ‘82’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 9, **{EM\_TRAN\_KKO의 KKO\_SEQ 값}**);

#### AT(알림톡) + 강조표기 <a href="#_toc73440740" id="_toc73440740"></a>

알림톡 본문 상단에 강조표기 시 표기 내용을 add\_info.json 파일에 아래 내용을 추가합니다.

(예: 버튼이 없는 템플릿의 경우)

| **add\_info.json**                                                  |
| ------------------------------------------------------------------- |
| <p>{</p><p>"expansion":{</p><p>"title":"입금 XX원"</p><p>}</p><p>}</p> |

(예: 버튼이 있는 템플릿의 경우)

| **add\_info.json**                                                                                                                                                                                 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"button":[</p><p>{</p><p>"name":"미리 주문하기",</p><p>"type":"WL",</p><p>"url_mobile":"http://www.kakao.com"</p><p>}</p><p>],</p><p>"expansion":{</p><p>"title":"입금 XX원"</p><p>}</p><p>}</p> |

(Insert Query)

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, ATTACHED\_FILE\_1)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT 테스트입니다', **‘D:/spool/add\_info.json’**);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', NOW(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ값}**);

#### AT(알림톡) + 바로연결 <a href="#_toc73440741" id="_toc73440741"></a>

\*\* 알림톡 바로연결이란?\
&#x20;     \- 알림톡 하단에 가로 슬라이드 형태로 표시되며 웹/앱 연결, 상담톡 전환 등을 호출하는 기능\
\- 상담톡 또는 챗봇을 사용하는 발신프로필만 이용 가능\
\- 바로연결은 최대 10개까지 사용 가능, 사용 시 버튼 개수는 2개로 제한됨

**(QUICK\_REPLY파라미터)**

| **키**           | **타입**      | **필수**   | **설명**                                                                |                     |
| --------------- | ----------- | -------- | --------------------------------------------------------------------- | ------------------- |
| quick\_reply    |             | array    |                                                                       | 바로연결 목록             |
| name            | text(14)    | Y        | 바로연결 제목                                                               |                     |
| type            | text(2)     | Y        | 바로연결 타입 (아래 표 참조)                                                     |                     |
| url\_pc         | text        | -        | pc 환경에서 바로연결 클릭 시 이동할 url                                             |                     |
| url\_mobile     | text        | -        | mobile 환경에서 바로연결 클릭 시 이동할 url                                         |                     |
| scheme\_ios     | text        | -        | <p>mobile ios 환경에서 바로연결 클릭 시 실행할<br>application custom scheme</p>     |                     |
| scheme\_android | text        | -        | <p>mobile android 환경에서 바로연결 클릭 시 실행할<br>application custom scheme</p> |                     |
|                 | chat\_extra | text(50) |                                                                       | 상담톡/봇 전환 시 전달할 메타정보 |
|                 | chat\_event | text(50) |                                                                       | 봇 전환 시 연결할 봇 이벤트명   |

**(QUICK\_REPLY타입)**

| **버튼타입**        | **속성**                             | **타입**      | **필수**                                                      | **설명**            |                                                                                                                                                                 |
| --------------- | ---------------------------------- | ----------- | ----------------------------------------------------------- | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **웹링크**         | **WL**                             | url\_mobile | text                                                        | Y                 | <p>바로연결 클릭 시 이동할</p><p>pc/mobile환경별 web url</p>                                                                                                                 |
| url\_pc         | text                               | N           |                                                             |                   |                                                                                                                                                                 |
| **앱링크**         | **AL**                             | scheme\_ios | text                                                        | Y                 | <p><strong>scheme_ios, scheme_android,</strong></p><p><strong>url_mobile 중 2가지 필수 입력</strong></p><p>mobile ios 환경에서 바로연결 클릭 시 실행할 application custom scheme</p> |
| scheme\_android | text                               | Y           | mobile android 환경에서 바로연결 클릭 시 실행할 application custom scheme |                   |                                                                                                                                                                 |
| url\_mobile     | text                               | -           | mobile 환경에서 바로연결 클릭 시 이동할 url                               |                   |                                                                                                                                                                 |
| url\_pc         | text                               | N           | pc 환경에서 바로연결 클릭 시 이동할 url                                   |                   |                                                                                                                                                                 |
| **봇키워드**        | **BK**                             | -           | -                                                           | -                 | 해당 바로연결 텍스트 전송                                                                                                                                                  |
| **메시지전달**       | **MD**                             | -           | -                                                           | -                 | 해당 바로연결 텍스트 + 메시지 본문 전송                                                                                                                                         |
| **상담톡전환**       | 상담톡을 이용하는 카카오톡 채널만 이용가능            |             |                                                             |                   |                                                                                                                                                                 |
| **BC**          | chat\_extra                        | text        | N                                                           | 상담톡 전환 시 전달할 메타정보 |                                                                                                                                                                 |
| **봇 전환**        | 카카오 I 오픈빌더의 챗봇을 사용하는 카카오톡 채널만 이용가능 |             |                                                             |                   |                                                                                                                                                                 |
| **BT**          | chat\_extra                        | text        | N                                                           | 봇 전환 시 전달할 메타정보   |                                                                                                                                                                 |
| chat\_event     | text                               | N           | 봇 전환 시 연결할 봇 이벤트명                                           |                   |                                                                                                                                                                 |

알림톡 본문 하단에 바로연결 표기 내용을 add\_info.json 파일에 아래 내용을 추가합니다.

(예: 버튼이 없고,

알림톡 바로연결 (웹링크/봇키워드/메시지전달/상담톡전환)이 있는 템플릿의 경우)

| **add\_info.json**                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"expansion":{</p><p>"supplement": {</p><p>"quick_reply": [</p><p>{</p><p>"type": "WL",</p><p>"name": "비즈뿌리오",</p><p>"url_mobile": "https://www.bizppurio.com/"</p><p>},</p><p>{</p><p>"type": "BK",</p><p>"name": "봇키워드하기"</p><p>},</p><p>{</p><p>"type": "MD",</p><p>"name": "메시지전달하기"</p><p>},</p><p>{</p><p>"type": "BC",</p><p>"name": "상담톡전환"</p><p>}</p><p>]</p><p>}</p><p>}</p><p>}</p> |

(예: 버튼이 있고,

알림톡 바로연결 (웹링크/봇키워드/메시지전달/상담톡전환)이 있는 템플릿의 경우)

| **add\_info.json**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"button": [</p><p>{</p><p>"type": "WL",</p><p>"name": "비즈뿌리오 바로가기",</p><p>"url_mobile": "https://www.bizppurio.com/"</p><p>}</p><p>],</p><p>"expansion":{</p><p>"supplement": {</p><p>"quick_reply": [</p><p>{</p><p>"type": "WL",</p><p>"name": "비즈뿌리오",</p><p>"url_mobile": "https://www.bizppurio.com/"</p><p>},</p><p>{</p><p>"type": "BK",</p><p>"name": "봇키워드하기"</p><p>},</p><p>{</p><p>"type": "MD",</p><p>"name": "메시지전달하기"</p><p>},</p><p>{</p><p>"type": "BC",</p><p>"name": "상담톡전환"</p><p>}</p><p>]</p><p>}</p><p>}</p><p>}</p> |

(Insert Query)

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, ATTACHED\_FILE\_1)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT 테스트입니다', **‘D:/spool/add\_info.json’**);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', NOW(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ값}**);

#### FT(친구톡 이미지 및 친구톡 와이드 이미지) 발송 <a href="#_toc73440742" id="_toc73440742"></a>

이미지 포함하여 친구톡 발송 시 카카오에 등록된 이미지의 유형(일반/와이드)에 따라 add\_info.json 파일을 생성하여 등록합니다.

(예: 일반 유형의 이미지 경우)

| **add\_info.json**                                                                                                                                                                  |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"image":{</p><p>"img_url":"http://mud-kage.kakao.com/dn/bYNiOa/btqBqjiQxoK/4IDZksnFEuBdU6zk9UBRKK/img.jpg",</p><p>"img_link":"http://www.daou.co.kr"</p><p>}</p><p>}</p> |

(예: 와이드 유형의 이미지 경우)

| **add\_info.json**                                                                                                                                                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"image":{</p><p>"img_url":"http://mud-kage.kakao.com/dn/bYNiOa/btqBqjiQxoK/4IDZksnFEuBdU6zk9UBRKK/img.jpg",</p><p>"img_link":"http://www.daou.co.kr"</p><p>},</p><p>"expansion":{</p><p>"wide":"y"</p><p>}</p><p>}</p> |

(Insert Query)

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, ATTACHED\_FILE\_1)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT 테스트입니다', **‘D:/spool/add\_info.json’**);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', NOW(), 8, **{EM\_TRAN\_KKO의 KKO\_SEQ값}**);

#### AT/FT/BI(알림톡/친구톡/브랜드톡) + 대체(SMS/MMS)발송 <a href="#_toc73440743" id="_toc73440743"></a>

알림톡/친구톡/브랜드톡은 전송결과에 대해 실패가 발생할 경우, **대체발송이 가능합니다**.

단, 해당 서비스 아이디에 대해 **대체발송 가능여부와 주체**에 대한 설정이 되어있어야 합니다.

대체발송의 경우, EM\_TRAN 테이블에 해당 레코드가 추가로 생성되며 **SMS의 TRAN\_TYPE은 1**이며

**MMS의 TRAN\_TYPE은 2**이며, **TRAN\_ETC4에 입력된 값이** **실제 원본데이터의 TRAN\_PR** 입니다

**(AT+SMS)**

INSERT INTO EM\_TRAN\_KKO

(SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, RE\_TYPE, RE\_BODY)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT+SMS대체발송', 'SMS', '대체발송');

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ}**);

**(AT+MMS)**

INSERT INTO EM\_TRAN\_KKO (SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE,

RE\_TYPE, RE\_BODY, ATTACHED\_FILE\_1)

VALUES ({발신 프로필 키}, {템플릿 코드}, '82', 'AT+MMS대체발송',

'MMS', '대체발송', ‘D:/spool/mms.jpg’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ}**);

#### RCS 발송 <a href="#_toc73440744" id="_toc73440744"></a>

RCS는 사용 가능한 챗봇ID와 메시지베이스ID를 사용하여 발송되며 RCS 지원기기 사용자인 경우 발송 가능합니다.

메시지베이스ID는 이통사에서 제공하는 **메시지 포맷**을 사용하거나 **\[RCS 비즈센터]**을 통해 **템플릿**을 등록하여 사용가능합니다.

INSERT INTO EM\_TRAN\_RCS

(CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY)

VALUES ({챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”안녕하세요”}’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ 값}**);

**RCS\_BODY**

| **키**       | **타입** | **필수** | **설명** |
| ----------- | ------ | ------ | ------ |
| title       |        |        |        |
| media       |        |        |        |
| description |        |        |        |

\* 리치카드 개수 및 순서에 따라 넘버링 (title1, title2 … …)

| **RCS\_BODY (1개)**                                                                                                                                                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p>{</p><p>"title" : "카드",</p><p>"media" : "<strong>등록된 이미지 URL</strong>",</p><p>"description": "안녕하세요!"</p><p>}</p>                                                                                                              |
| **RCS\_BODY (2개 이상)**                                                                                                                                                                                                             |
| <p>{</p><p>"title1" : "카드",</p><p>"media1" : "<strong>등록된 이미지 URL</strong>",</p><p>"description1": "안녕하세요!",</p><p>"title2" : "카드2",</p><p>"media2" : "<strong>등록된 이미지 URL</strong>",</p><p>"description2": "안녕하세요!",</p><p>}</p> |

\* URL 예시 - maapfile://BR.i6dOpSm8N8.20200302150000.001

**RCS 공통 포맷(MESSAGEBASE\_ID)**

| **MESSAGEBASE\_ID** | **상품** | **메시지 타입**            | **카드장수** | <p><strong>카드별</strong></p><p><strong>최대 버튼수</strong></p> | <p><strong>메시지 전체</strong></p><p><strong>최대 본문 길이 (글자수)</strong></p> |
| ------------------- | ------ | --------------------- | -------- | --------------------------------------------------------- | -------------------------------------------------------------------- |
| SS000000            | SMS    | Standalone            | 1        | 1                                                         | 100                                                                  |
| SL000000            | LMS    | Standalone            | 1        | 3                                                         | 1300                                                                 |
| SMwThT00            | MMS    | Standalone Media Top  | 1        | 2                                                         | 1300                                                                 |
| SMwThM00            | MMS    | Standalone Media Top  | 1        | 2                                                         | 1300                                                                 |
| SMwLhX00            | MMS    | Standalone Horizontal | 1        | 2                                                         | 1300                                                                 |
| SMwRhX00            | MMS    | Standalone Horizontal | 1        | 2                                                         | 1300                                                                 |
| CMwMhM0300          | MMS    | Carousel Medium       | 3        | 2                                                         | 1300 (총합)                                                            |
| CMwMhM0400          | MMS    | Carousel Medium       | 4        | 2                                                         | 1300 (총합)                                                            |
| CMwMhM0500          | MMS    | Carousel Medium       | 5        | 2                                                         | 1300 (총합)                                                            |
| CMwMhM0600          | MMS    | Carousel Medium       | 6        | 2                                                         | 1300 (총합)                                                            |
| CMwShS0300          | MMS    | Carousel Small        | 3        | 2                                                         | 1300 (총합)                                                            |
| CMwShS0400          | MMS    | Carousel Small        | 4        | 2                                                         | 1300 (총합)                                                            |
| CMwShS0500          | MMS    | Carousel Small        | 5        | 2                                                         | 1300 (총합)                                                            |
| CMwShS0600          | MMS    | Carousel Small        | 6        | 2                                                         | 1300 (총합)                                                            |

#### RCS + BUTTONS 발송 <a href="#_toc73440745" id="_toc73440745"></a>

RCS에 버튼 링크를 추가하고자 할 경우 아래와 같은 JSON 형식에 맞춰 RCS테이블(EM\_TRAN\_RCS)의 BUTTONS 필드에 입력합니다.

INSERT INTO EM\_TRAN\_RCS

(CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, BUTTONS)

VALUES ({챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”안녕하세요”}’, ‘{버튼 예시 참조}’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES (‘01000000000’, ‘01000000000’, ‘1’, NOW(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ 값}**);

**BUTTONS (대문자)**

**Suggestions (소문자)**

**action (소문자)**

| **키**          | **타입** | **필수** | **설명**      |
| -------------- | ------ | ------ | ----------- |
| \[ Action 타입 ] | Object | Y      |             |
| displayText    |        | Y      | 버튼에 출력될 텍스트 |
| postback       |        | N      |             |

**postback (소문자)**

**# Action 타입**

1\. urlAction

| **필드 1**  | **필드 2** | **필드 3** | **설명** |
| --------- | -------- | -------- | ------ |
| urlAction |          |          | URL 연결 |
|           | openUrl  |          |        |
|           |          | url      |        |

2\. dialerAction

| **필드 1**     | **필드 2**        | **필드 3**    | **설명** |
| ------------ | --------------- | ----------- | ------ |
| dialerAction |                 |             | 전화 걸기  |
|              | dialPhoneNumber |             |        |
|              |                 | phoneNumber |        |

3\. mapAction

| **필드 1**  | **필드 2**     | **필드 3**    | **필드 4**  | **설명**  |
| --------- | ------------ | ----------- | --------- | ------- |
| mapAction |              |             |           | 지도 보여주기 |
|           | showLocation |             |           |         |
|           |              | location    |           |         |
|           |              |             | query     |         |
|           |              |             | latitude  |         |
|           |              |             | longitude |         |
|           |              |             | label     |         |
|           |              | fallbackUrl |           |         |

4\. mapAction

| **필드 1**  | **필드 2**            | **설명**   |
| --------- | ------------------- | -------- |
| mapAction |                     | 현재 위치 공유 |
|           | requestLocationPush |          |

5\. calendarAction

| **필드 1**       | **필드 2**            | **필드 3**    | **설명** |
| -------------- | ------------------- | ----------- | ------ |
| calendarAction |                     |             | 캘린더 등록 |
|                | createCalendarEvent |             |        |
|                |                     | startTime   |        |
|                |                     | endTime     |        |
|                |                     | title       |        |
|                |                     | description |        |

6\. composeAction

| **필드 1**      | **필드 2**           | **필드 3**    | **설명** |
| ------------- | ------------------ | ----------- | ------ |
| composeAction |                    |             | 메시지 전송 |
|               | composeTextMessage |             |        |
|               |                    | phoneNumber |        |
|               |                    | text        |        |

7\. clipboardAction

| **필드 1**        | **필드 2**        | **필드 3** | **설명** |
| --------------- | --------------- | -------- | ------ |
| clipboardAction |                 |          | 복사하기   |
|                 | copyToClipboard |          |        |
|                 |                 | text     |        |

**#** **Action** **예시**

버튼 표현 방식 3장의 카드이고 2, 0, 1의 버튼이 있다고 가정하면 BUTTONS는 아래와 같이 구성 할 수 있습니다. ( JSON KEY 대소문자 구분 )

|  **BUTTONS**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <p>{</p><p>"BUTTONS":[</p><p>{"suggestions": [</p><p>{"action": {</p><p>"urlAction": {"openUrl": {"url": "https://www.google.com" }},</p><p>"displayText": "Open website or deep link",</p><p>"postback": {"data": "set_by_chatbot_open_url" }}},</p><p>{"action": {</p><p>"urlAction": {"openUrl": {"url": "https://www.google2.com" }},</p><p>"displayText": "Open website or deep link",</p><p>"postback": {"data": "set_by_chatbot_open_url_2" }}}</p><p>]},</p><p>{},</p><p>{"suggestions": [</p><p>{"action": {</p><p>"urlAction": {"openUrl": {"url": "https://www.google2.com" }},</p><p>"displayText": "Open website or deep link",</p><p>"postback": {"data": "set_by_chatbot_open_url_2" }}}</p><p>]}</p><p>]</p><p>}</p> |

#### RCS + 대체(SMS/MMS)발송 <a href="#_toc73440746" id="_toc73440746"></a>

RCS는 전송결과에 대해 실패가 발생할 경우, **대체발송이 가능합니다**.

단, 해당 서비스 아이디에 대해 **대체발송 가능여부와 주체**에 대한 설정이 되어있어야 합니다.

대체발송의 경우, EM\_TRAN 테이블에 해당 레코드가 추가로 생성되며 **SMS의 TRAN\_TYPE은 1**이고

**MMS의 TRAN\_TYPE은 2**이며, **TRAN\_ETC4에 입력된 값이** **실제 원본데이터의 TRAN\_PR** 입니다

**(RCS+SMS)**

INSERT INTO EM\_TRAN\_RCS

(CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, RE\_TYPE, RE\_BODY)

VALUES ({챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”RCS+SMS 대체발송”}’ 'SMS', '대체발송');

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ}**);

**(RCS+MMS)**

INSERT INTO EM\_TRAN\_KKO

(CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, RE\_TYPE, RE\_BODY)

VALUES ({챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”RCS+MMS 대체발송”}’,

'MMS', '대체발송', ‘D:/spool/mms.jpg’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ}**);

#### AT/FT + 1차 대체(RCS) + 2차 대체(SMS/MMS) 발송 <a href="#_toc73440747" id="_toc73440747"></a>

알림톡/친구톡은 전송결과에 대해 실패가 발생할 경우, 최대 2차 **대체발송이 가능합니다**.

\- 대체발송의 경우, EM\_TRAN 테이블에 해당 레코드가 추가로 됩니다.

\- 발송에 사용되는 RCS\_SEQ 값과 KKO\_SEQ 값은 동일해야 합니다.

\- 2차 대체(SMS/MMS)의 정보는 RCS 테이블에 입력해야 정상적으로 발송됩니다.

**(AT + RCS + SMS)**

INSERT INTO EM\_TRAN\_KKO

(KKO\_SEQ, SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, RE\_TYPE)

VALUES (**{KKO\_SEQ}**, {발신 프로필 키}, {템플릿 코드}, '82', 'AT 메시지, 'R’);

INSERT INTO EM\_TRAN\_RCS

(RCS\_SEQ, CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, RE\_TYPE, RE\_BODY)

VALUES (**{KKO\_SEQ 동일}**, {챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”AT+RCS+SMS 대체발송”}’,

'SMS', ‘SMS 2차 대체발송 메시지’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ}**);

**(AT + RCS + MMS)**

INSERT INTO EM\_TRAN\_KKO

(KKO\_SEQ, SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, RE\_TYPE)

VALUES (**{KKO\_SEQ}**, {발신 프로필 키}, {템플릿 코드}, '82', 'AT 메시지', 'R’);

INSERT INTO EM\_TRAN\_RCS

(RCS\_SEQ, CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY,

RE\_TYPE, RE\_BODY, ATTACHED\_FILE\_1)

VALUES (**{KKO\_SEQ 동일}**, {챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”AT+RCS+SMS 대체발송”}’,

'SMS', ‘SMS 2차 대체발송 메시지’, ‘D:/mms.jpg’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 7, **{EM\_TRAN\_KKO의 KKO\_SEQ}**);

#### RCS + 1차 대체(AT/FT) + 2차 대체(SMS/MMS) 발송 <a href="#_toc73440748" id="_toc73440748"></a>

RCS는 전송결과에 대해 실패가 발생할 경우, 최대 2차 대체발송이 가능합니다.

\- 대체발송의 경우, EM\_TRAN 테이블에 해당 레코드가 추가로 됩니다.

\- 발송에 사용되는 RCS\_SEQ 값과 KKO\_SEQ 값은 동일해야 합니다.

\- 2차 대체(SMS/MMS)의 정보는 KKO 테이블에 입력해야 정상적으로 발송됩니다.

**(RCS + AT + SMS)**

INSERT INTO EM\_TRAN\_RCS

(RCS\_SEQ, CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, RE\_TYPE)

VALUES (**{RCS\_SEQ}**, {챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”RCS 메시지”}’, 'K');

INSERT INTO EM\_TRAN\_KKO

(KKO\_SEQ, SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, RE\_TYPE, RE\_BODY)

VALUES (**{RCS\_SEQ 동일}**, {발신 프로필 키}, {템플릿 코드}, '82', 'RCS+AT+SMS 대체발송', 'SMS’, ‘SMS 2차 대체발송 메시지’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ}**);

**(RCS + AT + MMS)**

INSERT INTO EM\_TRAN\_RCS

(RCS\_SEQ, CHATBOT\_ID, HEADER, MESSAGEBASE\_ID, RCS\_BODY, RE\_TYPE)

VALUES (**{RCS\_SEQ}**, {챗봇 ID}, 0, ‘SS000000’, ‘{“description”:”RCS 메시지”}’, 'K');

INSERT INTO EM\_TRAN\_KKO

(KKO\_SEQ, SENDER\_KEY, TEMPLATE\_CODE, NATION\_CODE, MESSAGE, RE\_TYPE, RE\_BODY)

VALUES (**{RCS\_SEQ 동일}**, {발신 프로필 키}, {템플릿 코드}, '82', 'RCS+AT+MMS 대체발송', 'MMS’, ‘MMS 2차 대체발송 메시지’);

INSERT INTO EM\_TRAN

(TRAN\_PHONE, TRAN\_CALLBACK, TRAN\_STATUS, TRAN\_DATE, TRAN\_TYPE, TRAN\_ETC4)

VALUES ('01000000000', '01000000000', '1', now(), 11, **{EM\_TRAN\_RCS의 RCS\_SEQ}**);

### 발송결과코드 <a href="#_toc73440749" id="_toc73440749"></a>

| **구분**                           | **코드**                | **설명**       |
| -------------------------------- | --------------------- | ------------ |
| <p>클라이언트</p><p>실패처리</p><p>코드</p> | 1                     | 리포트수신대기 타임아웃 |
| 4                                | MMS/AT/FT의 콘텐츠 정보가 없음 |              |
| 5                                | 블랙리스트에 의한 차단          |              |
| 6                                | 메시지본문 미 입력            |              |
| 메시지본문 길이 초과                      |                       |              |
| 대체발송(SMS) 메시지본문 길이 초과            |                       |              |
| 7                                | 발송시간 지난 데이터           |              |
| 8                                | 존재하지 않는 첨부파일          |              |
| 0바이트 첨부파일                        |                       |              |
| 지원하지 않는 첨부파일                     |                       |              |
| 첨부파일 이미지 사이즈 초과                  |                       |              |
| 9                                | Block time (날짜/시간제한)  |              |

.

| **구분**                    | **코드**  | **타입**                                                          | **설명**        |
| ------------------------- | ------- | --------------------------------------------------------------- | ------------- |
| <p>발송결과코드</p><p>(리포트)</p> | 0       | 공통                                                              | 성공            |
| 1                         | 공통      | 타임아웃                                                            |               |
| 2                         | 공통      | 잘못된 전화번호                                                        |               |
| v                         | 공통      | 발신번호 사전 등록제에 의한 미등록 차단                                          |               |
| w                         | 공통      | 발신번호 사전 등록제 번호규칙 위반                                             |               |
| m                         | 공통      | 메시지 SPAM 차단                                                     |               |
| q                         | 공통      | 컨텐츠 경로가 잘못되었거나 파일이 없는 경우                                        |               |
| Q                         | 공통      | MessagebaseID가 존재하지 않음                                          |               |
| x                         | 공통      | ChatBotID가 존재하지 않음                                              |               |
| z                         | 공통      | 그 외 오류                                                          |               |
|                           |         |                                                                 |               |
| <p>발송결과코드</p><p>(리포트)</p> | a       | SMS/MMS                                                         | 단말기 일시 서비스 정지 |
| b                         | SMS/MMS | 기타 단말기 문제                                                       |               |
| c                         | SMS/MMS | 단말기에서 착실 거절                                                     |               |
| d                         | SMS/MMS | 기타                                                              |               |
| e                         | SMS/MMS | 망 에러                                                            |               |
| f                         | SMS/MMS | SMTS 포맷에러                                                       |               |
| g                         | SMS/MMS | SMS 서비스 불가 단말기                                                  |               |
| h                         | SMS/MMS | 착신 측의 호불가 상태                                                    |               |
| i                         | SMS/MMS | SMS 운영자가 삭제한 메시지                                                |               |
| j                         | SMS/MMS | 스케쥴려와 ASE 사이의 메시지 큐                                             |               |
| k                         | SMS/MMS | 이통사에서 SPAM 처리                                                   |               |
| l                         | SMS/MMS | [www.nospam.go.kr](http://www.nospam.go.kr)에 등록된 수신거부 번호        |               |
| P                         | SMS/MMS | 폰 번호가 형식에 어긋난 경우                                                |               |
| t                         | SMS/MMS | 2개 이상의 SPAM 차단                                                  |               |
| q                         | SMS/MMS | 필드 형식이 잘못된 경우 (예:메시지 내용 없음)                                     |               |
| s                         | SMS/MMS | 메시지 스팸 차단                                                       |               |
| A                         | SMS/MMS | 핸드폰 호 처리 중                                                      |               |
| B                         | SMS/MMS | 음영지역                                                            |               |
| C                         | SMS/MMS | 단말기 POWER OFF                                                   |               |
|                           |         |                                                                 |               |
| <p>발송결과코드</p><p>(리포트)</p> | D       | AT/FT                                                           | 메시지 저장개수 초과   |
| E                         | AT/FT   | 잘못된 파라 미터 요청                                                    |               |
| F                         | AT/FT   | 발신 프로필 키가 유효하지 않음                                               |               |
| G                         | AT/FT   | 발신 프로필을 찾을 수 없음                                                 |               |
| H                         | AT/FT   | 삭제된 발신프로필                                                       |               |
| I                         | AT/FT   | 차단 상태의 발신프로필                                                    |               |
| J                         | AT/FT   | 차단 상태의 옐로아이디/플러스친구                                              |               |
| K                         | AT/FT   | 닫힘 상태의 옐로아이디                                                    |               |
| L                         | AT/FT   | 삭제된 옐로아이디/플러스친구                                                 |               |
| M                         | AT/FT   | 메시지 전송 실패(테스트 서버에서 친구관계가 아닌 경우)                                 |               |
| N                         | AT/FT   | 템플릿 일치 확인 시 오류 발생                                               |               |
| O                         | AT/FT   | 예기치 않은 오류 발생                                                    |               |
| P                         | AT/FT   | 메시지를 발송했으나 수신확인 안됨(성공불확실)                                       |               |
| Q                         | AT/FT   | 내부 시스템 오류로 메시지 전송 실패                                            |               |
| R                         | AT/FT   | 전화번호 오류                                                         |               |
| S                         | AT/FT   | 메시지가 존재하지 않음                                                    |               |
| T                         | AT/FT   | <p>메시지 길이 제한 오류</p><p>변수 글자수 제한 초과</p>                          |               |
| U                         | AT/FT   | 템플릿을 찾을 수 없음                                                    |               |
| V                         | AT/FT   | 메시지를 전송할 수 없음                                                   |               |
| W                         | AT/FT   | <p>메시지 발송 가능한 시간이 아님</p><p>(친구톡/마케팅 메시지는 08시부터 20시까지 발송 가능)</p> |               |
| u                         | AT/FT   | 버튼 내용이 템플릿과 일치 하지 않음                                            |               |
| X                         | AT/FT   | 메시지를 포함된 이미지를 전송할 수 없음                                          |               |
| Y                         | AT/FT   | 기 타                                                             |               |
|                           |         |                                                                 |               |
| <p>발송결과코드</p><p>(리포트)</p> | A       | RCS                                                             | 전문 형식 에러      |
| B                         | RCS     | 시스템 에러                                                          |               |
| C                         | RCS     | MessageResendVO Convert 실패                                      |               |
| D                         | RCS     | 수신 번호 형식 오류                                                     |               |
| E                         | RCS     | 통신사 전달, 사용자가 메시지를 받을 수 없음                                       |               |
| F                         | RCS     | 타임아웃                                                            |               |
| G                         | RCS     | 메시지 전송을 할 수 없는 상태입니다. (서버의 요청 거부)                               |               |
| H                         | RCS     | RCS 메시지 TPS가 초과되었습니다.                                           |               |
| I                         | RCS     | 시스템 에러                                                          |               |
| J                         | RCS     | 요청 파라미터 형식 오류                                                   |               |
| K                         | RCS     | fileID가 없거나 ID형식에 맞지 않음                                         |               |
| L                         | RCS     | 자사 고객이 아닙니다.                                                    |               |
| M                         | RCS     | <p>자사 고객이지만,</p><p>RCS메시지를 수신할 수 있는 가입자가 아닙니다.</p>              |               |
| N                         | RCS     | 단말기기로 RCS 메시지를 전송할 수 없습니다.                                      |               |
| O                         | RCS     | BotID(발신번호)가 전화번호 형식에 맞지 않음                                     |               |
| P                         | RCS     | BrandID에 존재하지 않는 BotID                                          |               |
| Q                         | RCS     | MessagebaseID가 존재하지 않음                                          |               |
| R                         | RCS     | messagebase의 formatstring 누락된 필수 항목이 있습니다.                      |               |
| S                         | RCS     | messagebase의 param 부정확하거나 누락된 필수 항목이 있습니다.                      |               |
| T                         | RCS     | Action button이 허용되지 않는 messagebaseID에서 Action button을 사용하였음     |               |
| U                         | RCS     | 등록한 패턴과 일치 하지 않음                                                |               |
| V                         | RCS     | description 최대글자수를 초과했습니다.                                      |               |
| W                         | RCS     | 메시지 형식이 부정확하거나 누락된 필수항목이 있습니다.                                  |               |
| X                         | RCS     | Backend 서버 에러                                                   |               |
| Y                         | RCS     | Webhook 메시지 미 수신 오류가 발생 했습니다.                                   |               |
| Z                         | RCS     | 삼성 MaaP Gateway NB API 연동 에러                                    |               |
| a                         | RCS     | MaaP 시스템 혹은 RCS 프로토콜 상의 이슈로 발송 실패했습니다.                          |               |
| b                         | RCS     | 메시지 회수 실패했습니다.                                                  |               |
| c                         | RCS     | RCS 세션 연결 전 만료되어 발송 실패했습니다.                                     |               |
| d                         | RCS     | 알려지지 않은 오류                                                      |               |
